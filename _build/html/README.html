<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>fwdpy: forward simulation in Python using fwdpp &mdash; fwdpy 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="fwdpy 0.0.1 documentation" href="index.html" />
    <link rel="next" title="Modules in this package" href="docs/notes.html" />
    <link rel="prev" title="Welcome to fwdpy’s documentation!" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docs/notes.html" title="Modules in this package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to fwdpy’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">fwdpy 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fwdpy-forward-simulation-in-python-using-fwdpp">
<h1>fwdpy: forward simulation in Python using fwdpp<a class="headerlink" href="#fwdpy-forward-simulation-in-python-using-fwdpp" title="Permalink to this headline">¶</a></h1>
<p>This is the main README for the fwdpy software.</p>
<p>This package is a testing ground for providing access to efficient forward-time population simulation machinery in Python.</p>
<p>This package is implemented in terms of:</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://www.cython.org/">Cython</a>, which is a package allowing C++ and Python to work together</li>
<li><a class="reference external" href="http://molpopgen.github.io/fwdpp">fwdpp</a>, which is a C++11 template library for implementing efficient population genetic simulations</li>
</ol>
<p>Please note that this package is likely to be quite unstable/actively developed.</p>
<p>The package is usable now (in fact, we are currently using it for research), but the API, etc., could change without warning.</p>
<div class="section" id="citation">
<h2>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">¶</a></h2>
<p>See the project home page for details (<a class="reference external" href="http://molpopgen.github.io/fwdpy">http://molpopgen.github.io/fwdpy</a>).</p>
</div>
<div class="section" id="features">
<h2>Features:<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>So far, there is support for:</p>
<ul class="simple">
<li>Simulation of a recombining region with arbitrary variation in neutral mutation rate, recombination rate, and distribution of selective effects and their dominance along the region.</li>
<li>Support for arbitrary changes in population size.</li>
<li>The ability to sample from simulated populations.</li>
<li>Calculate some standard summary statistics from samples taken from simulated populations.</li>
<li>Selfing</li>
<li>The ability to vary model parameters over time (recombination rates, genetic maps, selfing, selection, etc.)</li>
<li>Sampling populations at various time points</li>
<li>Parallel executiom of simulations.  Multiple replicates may be run simultaenously via C++11&#8217;s threading mechanism.  This is a &#8220;sneaky&#8221; end-run around Pythons&#8217; Global Interpreter Lock, or GIL.</li>
</ul>
<p>The following distributions of selection coefficients are supported:</p>
<ul class="simple">
<li>constant (<em>i.e.</em>, <em>s</em> takes on a fixed value)</li>
<li>uniform</li>
<li>exponential</li>
<li>gamma</li>
<li>gaussian</li>
</ul>
<p>The following distributions of dominance are supported:</p>
<ul class="simple">
<li>constant (<em>i.e.</em>, <em>h</em> takes on a fixed value)</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Several examples exist in the form of output from &#8220;iPython&#8221;/Jupyter notebooks:</p>
<ul class="simple">
<li><a class="reference external" href="http://molpopgen.github.io/fwdpy/_build/html/examples/BGS.html">Background selection</a></li>
<li><a class="reference external" href="http://molpopgen.github.io/fwdpy/_build/html/examples/views.html">Viewing simulated populations</a></li>
<li><a class="reference external" href="http://molpopgen.github.io/fwdpy/_build/html/examples/windows.html">Sliding windows</a></li>
<li><a class="reference external" href="http://molpopgen.github.io/fwdpy/_build/html/examples/trajectories.html">Tracking mutation frequencies</a></li>
</ul>
</div>
<div class="section" id="availability">
<h2>Availability<a class="headerlink" href="#availability" title="Permalink to this headline">¶</a></h2>
<p>This package is distributed at the following github repository: <a class="reference external" href="https://github.com/molpopgen/fwdpy">https://github.com/molpopgen/fwdpy</a>.</p>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>This section assumes that all packages are installed in fairly standard locations, such as /usr/local.  See the troubleshooting section for more complex setups.</p>
<p>This package <em>minimally</em> depends on:</p>
<ul class="simple">
<li><a class="reference external" href="http://gnu.org/software/gsl">GSL</a></li>
<li><a class="reference external" href="http://molpopgen.github.io/fwdpp">fwdpp</a></li>
</ul>
<p>The configure script will enforce minimum version numbers of these dependencies, if necessary.</p>
<p><strong>Note:</strong> fwdpy may require the &#8216;dev&#8217; branch of fwdpp.  The configure script checks for <em>both</em> the correct dependency version number <em>and</em> specific header files within each depdency.  If the version number check passes, but a subsequent header check fails, then that is a sign that you need a development version of the relevant dependency.  The reason for this situation is that the development of fwdpy has generated ideas for how to make fwdpp more accessible.  This situation will remain until fwdpy stabilizes.</p>
<p>You also need a C++11-compliant compiler.  For linux users, GCC 4.8 or
newer should suffice.  OS X users must use the clang-omp package from <a class="reference external" href="http://brew.sh">brew</a>.</p>
<p>You may use one or the other of these libraries, but not both.  See the Performance subsection of the Installation section below for how to use these libraries.</p>
<div class="section" id="notes-for-os-x-users">
<h3>Notes for OS X users<a class="headerlink" href="#notes-for-os-x-users" title="Permalink to this headline">¶</a></h3>
<p>Apple is making life difficult for OS X users.  The release of El Capitan made installing third-party Unix tools into /usr/local more difficult.  A lot of the instructions below ask you to use <a class="reference external" href="http://brew.sh">brew</a> to install depdendencies.  Please make sure that you have a working <a class="reference external" href="http://brew.sh">brew</a> setup before trying any of the below.  If your setup is not working, please do research online about fixing it, which is beyond the scope of this document.</p>
<p>OS X users are recommended to use <a class="reference external" href="http://brew.sh">brew</a> to install the various dependencies:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>brew install clang-omp
<span class="nv">$ </span>brew install gsl
<span class="nv">$ </span><span class="c">##Risky:</span>
<span class="nv">$ </span>brew install fwdpp
<span class="nv">$ </span>brew install google-perftools
</pre></div>
</div>
<p><strong>Important</strong>: you need to install clang-omp on OS X!  This package
uses openmp for parallelizing some tasks.  Sadly, OS X&#8217;s compiler does
not come with openmp support, and so you need a third-party compiler
that does.</p>
<p>For brew users, you may or may not have luck with their version of fwdpp.  That package can change rapidly, and thus the brew version may get out-of-sync with the version required for this package.</p>
<p>The required Python package dependencies are in the requirements.txt file that comes with the source.</p>
</div>
</div>
<div class="section" id="what-python-version">
<h2>What Python version?<a class="headerlink" href="#what-python-version" title="Permalink to this headline">¶</a></h2>
<p>I&#8217;m developing the package using Python 2.7.6 on an Ubuntu machine.</p>
<p>Currently, the package is not 100% compatible with Python 3.  The goal is to make it work, though.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The latest release of the package is available via <a class="reference external" href="https://pypi.python.org">PyPi</a>, and can be installed with your favorite Python package manager:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install --upgrade pylibseq
</pre></div>
</div>
<div class="section" id="installation-from-source">
<h3>Installation from source<a class="headerlink" href="#installation-from-source" title="Permalink to this headline">¶</a></h3>
<p>This section describes &#8220;vanilla&#8221; installation using the minimal dependencies.</p>
<p>First, install the dependencies (see above).</p>
<p><strong>OS X users need to do the following first:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">CC</span><span class="o">=</span>clang-omp
<span class="nv">$ </span><span class="nb">export </span><span class="nv">CXX</span><span class="o">=</span>clang-omp++
</pre></div>
</div>
<p>To install system-wide.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./configure
<span class="nv">$ </span>sudo python setup.py install
</pre></div>
</div>
<p>To install for your user:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./configure --prefix<span class="o">=</span><span class="nv">$HOME</span>
<span class="nv">$ </span><span class="c">#yes, the prefix is needed again here...</span>
<span class="nv">$ </span>python setup.py install --prefix<span class="o">=</span><span class="nv">$HOME</span>
</pre></div>
</div>
<p>To uninstall:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="c">#use &#39;sudo&#39; here if it is installed system-wide...</span>
<span class="nv">$ </span>pip uninstall fwdpy
</pre></div>
</div>
<p>To build the package in place and run the unit tets:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="c">#build package locally:</span>
<span class="nv">$ </span>python setup.py build_ext -i
<span class="nv">$ </span><span class="c">#run the unit tests:</span>
<span class="nv">$ </span>python -m unittest discover unit_test
</pre></div>
</div>
</div>
</div>
<div class="section" id="note-for-developers">
<h2>Note for developers<a class="headerlink" href="#note-for-developers" title="Permalink to this headline">¶</a></h2>
<p>Cython is a static compiler.  Code written in Cython is compiled into C or, in the case of this package, C++.  Finally, the system&#8217;s C/C++ compiler is used to compile the final Python module.</p>
<p>In order to modify the package, you will need Cython installed:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install Cython
</pre></div>
</div>
<p>You need Cython &gt;= 0.22.2, so upgrade if you need to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install --upgrade Cython
</pre></div>
</div>
<p>If you wish to modify the package, then you will want setup.py to &#8220;re-Cythonize&#8221; when you make changes to the package source code.</p>
<p>To do this, use the setup.py script as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python setup.py build_ext -i --use-cython
</pre></div>
</div>
<p>Now, Cython will be a compilation depdendency, and any changes to .pyx/.pyd/.cc files in this package will trigger Cython to regenerate the .cpp files that make up the core of the package.</p>
<div class="section" id="rough-guide-to-installation-on-uci-hpc">
<h3>Rough guide to installation on UCI HPC<a class="headerlink" href="#rough-guide-to-installation-on-uci-hpc" title="Permalink to this headline">¶</a></h3>
<p>Use the following module:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>module load krthornt/thorntonlab
</pre></div>
</div>
<p>That command loads the proper dependencies for compiling much of the tools that we use.</p>
<p><strong>Note</strong>: this module replaces/over-rules some modules already on HPC.  The &#8220;thorntonlab&#8221; modules are all consistently compiled with a GCC version that we&#8217;ve deemed suitable.</p>
</div>
<div class="section" id="troubleshooting-the-installation">
<h3>Troubleshooting the installation<a class="headerlink" href="#troubleshooting-the-installation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="incorrect-fwdpp-version">
<h4>Incorrect fwdpp version<a class="headerlink" href="#incorrect-fwdpp-version" title="Permalink to this headline">¶</a></h4>
<p>This package is compatible with fwdpp &gt;= 0.4.3, which means that you should have a binary installed on your systems called fwdppConfig.  You can check if you have it:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>which fwdppConfig
</pre></div>
</div>
<p>If the above command returns nothing, then it is very likely that fwdpp is either too old, missing entirely from your system, or it is installed somewhere non-standard.  For example, if you installed fwdpp locally for your user, and did not edit PATH to include ~/bin, then fwdppConfig cannot be called without referring to its complete path.</p>
</div>
<div class="section" id="dependencies-in-non-standard-locations">
<h4>Dependencies in non-standard locations<a class="headerlink" href="#dependencies-in-non-standard-locations" title="Permalink to this headline">¶</a></h4>
<p>Your system&#8217;s compiler has a default set of paths where it will look for header files, libraries, etc.  Typically, these paths will include /usr and /usr/local.  If you have installed the dependencies somewhere else (your home directory, for example), then the ./configure script may not be able to find them automatically.</p>
<p><strong>NOTE:</strong> I sometimes get requests for installation help from users who have installed every dependency in a separate folder in their $HOME.  In other words, they have some setup that looks like this:</p>
<ul class="simple">
<li>$HOME/software/boost</li>
<li>$HOME/software/gsl</li>
<li>$HOME/software/fwdpp</li>
</ul>
<p>If you insist on doing this, then you are on your own.  You have to manually pass in all of the -I and -L flags to all of these locations.   This setup is problematic because it violates the POSIX Filesystem Hierarchy Standard (<a class="reference external" href="http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard</a>), and you cannot reasonably expect things to &#8220;just work&#8221; any more.  It would be best to start over, and simply install all of the dependencies into the following prefix:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ $HOME</span>/software
</pre></div>
</div>
<p>Doing so will allow $HOME/software/include, etc., to be populated as they were intended to be.</p>
</div>
</div>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="http://molpopgen.github.io/fwdpy">manual</a> is available online in html format at the project web page.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">fwdpy: forward simulation in Python using fwdpp</a><ul>
<li><a class="reference internal" href="#citation">Citation</a></li>
<li><a class="reference internal" href="#features">Features:</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#availability">Availability</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li><a class="reference internal" href="#notes-for-os-x-users">Notes for OS X users</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-python-version">What Python version?</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#installation-from-source">Installation from source</a></li>
</ul>
</li>
<li><a class="reference internal" href="#note-for-developers">Note for developers</a><ul>
<li><a class="reference internal" href="#rough-guide-to-installation-on-uci-hpc">Rough guide to installation on UCI HPC</a></li>
<li><a class="reference internal" href="#troubleshooting-the-installation">Troubleshooting the installation</a><ul>
<li><a class="reference internal" href="#incorrect-fwdpp-version">Incorrect fwdpp version</a></li>
<li><a class="reference internal" href="#dependencies-in-non-standard-locations">Dependencies in non-standard locations</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to fwdpy&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="docs/notes.html"
                        title="next chapter">Modules in this package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/README.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docs/notes.html" title="Modules in this package"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to fwdpy’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">fwdpy 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Kevin Thornton.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>